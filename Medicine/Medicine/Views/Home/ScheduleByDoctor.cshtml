@model List<Medicine.Models.Schedules.Schedule>
@{
    ViewBag.Title = "ScheduleByDoctor";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    int? number = ViewBag.Number;
    int id = ViewBag.DoctorId;
    DateTime nDate = new DateTime();
}
<script src="~/Scripts/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<link href="~/Scripts/air-datepicker-master/dist/css/datepicker.min.css" rel="stylesheet" />
<script src="~/Scripts/air-datepicker-master/dist/js/datepicker.min.js"></script>

<div class="container">
    <div class="row row-card-wrap">
        <div class="col l12 m12 s12 time-block-wrapper" id="selected">
            <div class="col l12 m12 s12 card color-line z-depth-1-half">
                @if (ViewBag.Date.Count != 0)
            {
                DateTime newDate = ViewBag.Time;
                    <a href="@Url.Action("ScheduleByDoctor", "Home", new { id = id, newDate = newDate, number = number})" class="btn week-button"><i class="material-icons right">send</i>Next week</a>
                }
            </div>
            @if (Model.Count > 0 && ViewBag.Date.Count != 0)
            {
                foreach (var d in ViewBag.Date)
                {
                    DateTime nd = d.Date;
                    string date = nd.Day.ToString();
                    string dayOfWeek = nd.DayOfWeek.ToString();
                    string month = System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat.GetMonthName(nd.Month);
                    <div class="time-block">
                        <a href="@Url.Action("AppointmantsTime","Schedule", new { date = nd, id = id})">
                            <div class="top-title">
                                <div class="col l12 m12 s12">
                                    <p>@date @month</p>
                                </div>
                                <p>@dayOfWeek</p>
                            </div>
                        </a>
                    </div>
                }
            }
            else
            {
                <h5 class="center-align" style="display:block;margin-top:100px;">Looks like, doctor doesn't have available appointments.</h5>
            }
        </div>
    </div>
</div>
